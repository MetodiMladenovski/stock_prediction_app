<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GraphRAG 10K Chat</title>
    <script src="https://unpkg.com/htmx.org@2.0.3"></script>
</head>
<body style="height: 100vh; overflow: hidden;">
<div style="width: 50%; margin: auto">
    <h1>ChatBot for analysing 10K Company reports</h1>
</div>
<div style="width: 70%; margin: auto; height: 60vh; overflow-y: scroll; top: 10px; padding: 0 5px 150px 5px;  border: 1px solid silver; border-bottom-left-radius: 10px; border-top-left-radius: 10px"
     id="chatBox">
</div>
<div style="height: 15vh; bottom: 0; width: 70%; margin: 20px auto auto auto;">
    <form hx-get="/chat" hx-target="#chatBox" hx-swap="beforeend" hx-on--after-request="this.reset()">
        <label for="question"></label>
        <input style="width: 79%; height: 30px; border: 2px solid green; border-radius: 10px; float: left;"
               type="text" name="question" id="question" placeholder="Write your question here">
        <button style="width: 19%; height: 36px; border: 2px solid green; border-radius: 10px; color: green; float: right;"
                type="submit" onclick="showQuestion()">Submit Question
        </button>
    </form>
</div>


</body>
<script>

    function showQuestion() {
        const questionElement = document.getElementById("question");
        const question = questionElement.value;
        if (question === '' || question === undefined || question === null) {
            alert("Not a valid question. Can not be empty")
            return;
        }
        const questionDiv = createQuestionElement(question);
        const chatBox = document.getElementById('chatBox');
        chatBox.appendChild(questionDiv);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    function createQuestionElement(question) {
        const div = document.createElement('div');
        div.style.width = '100%';
        div.style.height = '80px';
        const p = document.createElement('p');
        p.style.fontSize = '20px';
        p.style.textAlign = 'right';
        {#p.style.fontweight = 'bold';#}
        p.style.border = '1px solid gray';
        p.style.borderRadius = '10px';
        p.style.backgroundColor = 'lightgray';
        p.style.color = 'black';
        p.style.width = 'fit-content';
        p.style.padding = '2px 8px 2px 8px';
        p.style.float = 'right';
        p.textContent = question;
        p.name = 'askedQuestion';
        div.appendChild(p);
        return div;
    }


</script>
</html>